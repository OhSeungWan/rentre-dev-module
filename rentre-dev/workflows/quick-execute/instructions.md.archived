# Quick Execute - Instructions

<critical>The workflow execution engine is governed by: {project-root}/.bmad/core/tasks/workflow.xml</critical>
<critical>You MUST have already loaded and processed: {installed_path}/workflow.yaml</critical>
<critical>Communicate all responses in {communication_language}</critical>
<critical>This workflow is for SIMPLE, STANDALONE backlogs that don't need decomposition</critical>

<workflow>

<step n="1" goal="Get backlog input">
<ask>ë¹ ë¥´ê²Œ ì‹¤í–‰í•  ë°±ë¡œê·¸ë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.

**ì…ë ¥ ë°©ì‹:**

1. **ë…¸ì…˜ URL** - ë…¸ì…˜ ë°±ë¡œê·¸ í˜ì´ì§€ URL ë¶™ì—¬ë„£ê¸°
2. **ì§ì ‘ ì…ë ¥** - ë°±ë¡œê·¸ ë‚´ìš© ì§ì ‘ ì‘ì„±
3. **ê²€ìƒ‰** - ë…¸ì…˜ì—ì„œ ë°±ë¡œê·¸ ê²€ìƒ‰ (notion_integration: auto í•„ìš”)</ask>

<check if="option 1 - Notion URL">
  <check if="notion_integration == auto">
    <action>Extract page ID from URL</action>
    <action>Use Notion MCP to fetch backlog:
    - GET /pages/{page_id}
    - Extract: title, description, acceptance_criteria, status, priority
    - Check for figma_url, figma_node_id
    </action>
  </check>
  <check if="notion_integration != auto">
    <action>Inform: "ë…¸ì…˜ URLì„ ê°ì§€í–ˆì§€ë§Œ ì§ì ‘ ì—°ë™ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤."</action>
    <ask>ë°±ë¡œê·¸ ë‚´ìš©ì„ ì§ì ‘ ë¶™ì—¬ë„£ì–´ ì£¼ì„¸ìš”.</ask>
  </check>
</check>

<check if="option 2 - Direct input">
  <ask>ë°±ë¡œê·¸ ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”:

**í•„ìˆ˜ ì •ë³´:**

- ì œëª©
- ì„¤ëª… (ë¬´ì—‡ì„ í•´ì•¼ í•˜ëŠ”ì§€)
- ìˆ˜ìš© ê¸°ì¤€ (ì™„ë£Œ ì¡°ê±´)

**ì„ íƒ ì •ë³´:**

- í”¼ê·¸ë§ˆ URL (UI ì‘ì—…ì¸ ê²½ìš°)
- ê´€ë ¨ íŒŒì¼/ê²½ë¡œ íŒíŠ¸</ask>
  </check>

<check if="option 3 - Search">
  <check if="notion_integration != auto">
    <action>Inform: "ê²€ìƒ‰ ê¸°ëŠ¥ì€ ë…¸ì…˜ MCP ì—°ë™ì´ í•„ìš”í•©ë‹ˆë‹¤. ì§ì ‘ ì…ë ¥ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤."</action>
    <goto step="1">Restart with direct input</goto>
  </check>
  <ask>ê²€ìƒ‰í•  ë°±ë¡œê·¸ í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”:</ask>
  <action>Search Notion and display results</action>
  <ask>ëª©ë¡ì—ì„œ ì„ íƒí•´ ì£¼ì„¸ìš” (ë²ˆí˜¸ ì…ë ¥):</ask>
</check>

<action>Store backlog content as {backlog_content}</action>
<action>Generate {backlog_id} from title (sanitized)</action>

<template-output>backlog_loaded</template-output>
</step>

<step n="2" goal="Analyze backlog complexity">
<action>Analyze backlog complexity:

**ë³µì¡ë„ í‰ê°€ ê¸°ì¤€:**

1. **ìˆ˜ìš© ê¸°ì¤€ ìˆ˜**: {acceptance_criteria_count}ê°œ
   - â‰¤3: ë‚®ìŒ | 4-5: ë³´í†µ | >5: ë†’ìŒ

2. **í‚¤ì›Œë“œ ë¶„ì„**:
   - ê²½ê³  í‚¤ì›Œë“œ ë°œê²¬: {warning_keywords_found}

3. **ì˜ˆìƒ ì‘ì—… ë²”ìœ„**:
   - UI ë³€ê²½: {has_ui_changes}
   - ë¡œì§ ë³€ê²½: {has_logic_changes}
   - DB ë³€ê²½: {has_db_changes}
   - API ë³€ê²½: {has_api_changes}

4. **ì¢…í•© ë³µì¡ë„ ì ìˆ˜**: {complexity_score}/10
   </action>

<check if="complexity_score > 7">
  <action>Display warning:

"âš ï¸ **ë³µì¡ë„ ê²½ê³ **

ì´ ë°±ë¡œê·¸ëŠ” ì˜ˆìƒë³´ë‹¤ ë³µì¡í•´ ë³´ì…ë‹ˆë‹¤:

- ë³µì¡ë„ ì ìˆ˜: {complexity_score}/10
- ë°œê²¬ëœ ê²½ê³  ì‹ í˜¸: {warning_signals}

**ê¶Œì¥ ì‚¬í•­:**

- `*decompose` ì›Œí¬í”Œë¡œìš°ë¡œ ë¶„í•´ í›„ ì§„í–‰ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
- ê·¸ë˜ë„ ë¹ ë¥¸ ì‹¤í–‰ì„ ì›í•˜ì‹œë©´ ê³„ì† ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
  </action>

  <ask>ì–´ë–»ê²Œ ì§„í–‰í• ê¹Œìš”?

1. **ê³„ì† ì§„í–‰** - ì´ëŒ€ë¡œ ë¹ ë¥¸ ì‹¤í–‰
2. **ë¶„í•´ë¡œ ì „í™˜** - decompose-backlog ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
3. **ì·¨ì†Œ** - ì›Œí¬í”Œë¡œìš° ì¢…ë£Œ</ask>

  <check if="option 2">
    <action>Invoke decompose-backlog workflow with {backlog_content}</action>
    <action>Exit this workflow</action>
  </check>

  <check if="option 3">
    <action>Exit workflow</action>
  </check>
</check>

<check if="complexity_score <= 7">
  <action>Display assessment:

"âœ… **ë³µì¡ë„ í‰ê°€ ì™„ë£Œ**

- ë³µì¡ë„ ì ìˆ˜: {complexity_score}/10
- íŒì •: ë¹ ë¥¸ ì‹¤í–‰ ì í•©

ì´ ë°±ë¡œê·¸ëŠ” ë¶„í•´ ì—†ì´ ë°”ë¡œ ì‘ì—… ê°€ëŠ¥í•©ë‹ˆë‹¤."
</action>
</check>

<template-output>complexity_assessed</template-output>
</step>

<step n="3" goal="Analyze related codebase">
<action>Display:

"**ì½”ë“œë² ì´ìŠ¤ ë¶„ì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.**

ë°±ë¡œê·¸ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ê´€ë ¨ ì½”ë“œë¥¼ ë¶„ì„í•©ë‹ˆë‹¤."
</action>

<action>Invoke analyze-codebase workflow:

- backlog_id: {backlog_id}
- backlog_content: {backlog_content}
- backlog_folder: {backlogs_output}/{backlog_id}
- analysis_depth: {code_analysis_depth}
  </action>

<action>Store analysis result as {code_analysis}</action>

<action>Display analysis summary:

"**ğŸ“‚ ì½”ë“œ ë¶„ì„ ê²°ê³¼**

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ê¸°ìˆ  ìŠ¤íƒ:** {tech_stack}

**ê´€ë ¨ íŒŒì¼ ({file_count}ê°œ):**
{relevant_files_list}

**ìˆ˜ì •ì´ í•„ìš”í•œ íŒŒì¼:**
{files_to_modify}

**ì˜ì¡´ì„±:**
{dependencies}

**êµ¬í˜„ ì‹œ ì£¼ì˜ì‚¬í•­:**
{implementation_notes}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
</action>

<template-output>code_analyzed</template-output>
</step>

<step n="4" goal="Optional context gathering" optional="true">
<ask>ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘ì´ í•„ìš”í•œê°€ìš”?

**í˜„ì¬ ìƒíƒœ:**

- ë°±ë¡œê·¸ ë‚´ìš©: âœ… í™•ë³´
- ì½”ë“œ ë¶„ì„: âœ… ì™„ë£Œ
- í”¼ê·¸ë§ˆ ë””ìì¸: {figma_status}

**ì˜µì…˜:**

1. **ë°”ë¡œ ì‘ì—… ì‹œì‘** - í˜„ì¬ ì •ë³´ë¡œ ì¶©ë¶„
2. **ì»¨í…ìŠ¤íŠ¸ ìˆ˜ì§‘** - ì¶”ê°€ ì •ë³´ ìˆ˜ì§‘ (gather-context ì‹¤í–‰)
3. **í”¼ê·¸ë§ˆ í™•ì¸** - í”¼ê·¸ë§ˆ ë””ìì¸ ìŠ¤í™ ì¡°íšŒ (í”¼ê·¸ë§ˆ URL ìˆëŠ” ê²½ìš°)</ask>

<check if="option 2">
  <action>Execute gather-context task:
  - Load {gather_context_task}
  - Pass {backlog_content} and {code_analysis}
  - Collect additional context
  </action>
  <action>Store result as {additional_context}</action>
</check>

<check if="option 3 AND figma_url exists">
  <action>Use Figma MCP to get design specs:
  - mcp__figma__get_screenshot for visual preview
  - mcp__figma__get_metadata for specs
  </action>
  <action>Store as {figma_context}</action>
</check>

<template-output>context_gathered</template-output>
</step>

<step n="5" goal="Create working document and handoff to Dev">
<action>Create backlog folder: {backlogs_output}/{backlog_id}/</action>

<action>Save backlog document using {backlog_template}:

File: {backlogs_output}/{backlog_id}/backlog.md

Content:
"---
id: {backlog_id}
title: {backlog_title}
type: {backlog_type}
status: In Progress
created: {timestamp}
notion_url: {notion_url}
figma_url: {figma_url}
complexity_score: {complexity_score}

---

# {backlog_title}

## ì„¤ëª…

{description}

## ìˆ˜ìš© ê¸°ì¤€

{acceptance_criteria}

## ì½”ë“œ ë¶„ì„ ìš”ì•½

- ê´€ë ¨ íŒŒì¼: {file_count}ê°œ
- ì£¼ìš” ìˆ˜ì • ëŒ€ìƒ: {files_to_modify}
- ì£¼ì˜ì‚¬í•­: {implementation_notes}

## í”¼ê·¸ë§ˆ ì°¸ì¡°

{figma_reference}

## ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸

{additional_context}

## ì‘ì—… ë¡œê·¸

- [{timestamp}] ë¹ ë¥¸ ì‹¤í–‰ ì‹œì‘
  "
  </action>

<action>Display completion summary:

"**âœ… ë¹ ë¥¸ ì‹¤í–‰ ì¤€ë¹„ ì™„ë£Œ!**

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ë°±ë¡œê·¸:** {backlog_title}
**ë³µì¡ë„:** {complexity_score}/10
**ê´€ë ¨ íŒŒì¼:** {file_count}ê°œ

**ìƒì„±ëœ íŒŒì¼:**

- {backlogs_output}/{backlog_id}/backlog.md
- {backlogs_output}/{backlog_id}/code-analysis.md

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**ğŸš€ Dev ì—ì´ì „íŠ¸ë¡œ ì „í™˜í•˜ì—¬ ì‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤.**

Dev ì—ì´ì „íŠ¸ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹:

- `*implement` - êµ¬í˜„ ì‹œì‘
- `*figma` - í”¼ê·¸ë§ˆ ë””ìì¸ ì°¸ì¡°
- `*done` - ì‘ì—… ì™„ë£Œ ì²˜ë¦¬"
  </action>

<ask>Dev ì—ì´ì „íŠ¸ë¡œ ì „í™˜í• ê¹Œìš”?

1. **ì˜ˆ** - Dev ì—ì´ì „íŠ¸ë¡œ ì „í™˜í•˜ì—¬ êµ¬í˜„ ì‹œì‘
2. **ì•„ë‹ˆì˜¤** - PM ì—ì´ì „íŠ¸ ìœ ì§€
3. **ë‚˜ì¤‘ì—** - ì›Œí¬í”Œë¡œìš° ì¢…ë£Œ (ë‚˜ì¤‘ì— `*continue`ë¡œ ì¬ê°œ)</ask>

<check if="option 1">
  <action>Load Dev agent with context:
  - backlog_id: {backlog_id}
  - backlog_folder: {backlogs_output}/{backlog_id}
  - code_analysis: {code_analysis}
  </action>
</check>

<check if="option 3">
  <action>Save session state for later continuation</action>
</check>

<template-output>handoff_complete</template-output>
</step>

</workflow>
