# Analyze Codebase Workflow Configuration
name: analyze-codebase
description: "백로그 관련 코드베이스 분석 - 재사용 가능한 분석 결과 생성 (PM/Dev 참조용)"
author: "Rentre-Dev"

# Config source for module settings
config_source: "{project-root}/.bmad/rentre-dev/config.yaml"
communication_language: "{config_source}:communication_language"
user_name: "{config_source}:user_name"

# 코드 분석 설정 (세분화)
code_analysis:
  default_depth: "{config_source}:code_analysis.default_depth"
  max_files_quick: "{config_source}:code_analysis.max_files_quick"
  max_files_standard: "{config_source}:code_analysis.max_files_standard"
  max_files_deep: "{config_source}:code_analysis.max_files_deep"
  max_files_comprehensive: "{config_source}:code_analysis.max_files_comprehensive"
  include_dependencies: "{config_source}:code_analysis.include_dependencies"
  include_tests: "{config_source}:code_analysis.include_tests"

# Module paths
installed_path: "{project-root}/.bmad/rentre-dev/workflows/analyze-codebase"
module_path: "{project-root}/.bmad/rentre-dev"

# This is an interactive workflow
template: false
instructions: "{installed_path}/instructions.md"

# Output paths - 백로그 폴더에 저장
data_path: "{module_path}/data"
backlogs_folder: "{data_path}/backlogs"
tasks_folder: "{data_path}/tasks"

# Analysis result filename (consistent across all backlog types)
analysis_filename: "code-analysis.md"

standalone: true

# Can be invoked from other workflows
invocable: true
invocation_params:
  - backlog_id # 백로그 ID (필수)
  - backlog_content # 백로그 내용 (필수)
  - backlog_folder # 저장할 폴더 경로 (필수)
  - analysis_depth # 분석 깊이 (선택, 기본값: default_depth)
  - force_new # 기존 분석 무시하고 새로 분석 (선택, 기본값: false)
