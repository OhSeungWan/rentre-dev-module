# Backlog Hierarchy Map

> Generated by Rentre-Dev Navigator on {{date}}
> Database: {{database_name}}

## Visual Hierarchy

```
{{full_hierarchy_diagram}}
```

## Hierarchy Levels

| Level | 유형 | 역할 | 포함 가능 하위 |
| ----- | ---- | ---- | -------------- |

{{hierarchy_levels_table}}

## Relationship Matrix

어떤 유형이 어떤 유형과 연결될 수 있는지 보여주는 매트릭스:

{{relationship_matrix}}

## Navigation Flowchart

### Top-Down Navigation (위에서 아래로)

```
{{top_down_flowchart}}
```

### Bottom-Up Navigation (아래에서 위로)

```
{{bottom_up_flowchart}}
```

## Relation Property Mappings

### Parent Relations (상위 연결)

| 하위 유형 | 속성명 | 상위 유형 | 필수 여부 |
| --------- | ------ | --------- | --------- |

{{parent_relations_table}}

### Child Relations (하위 연결)

| 상위 유형 | 속성명 | 하위 유형 | 자동 생성 |
| --------- | ------ | --------- | --------- |

{{child_relations_table}}

### Cross Relations (교차 연결)

| 유형 A | 속성명 | 유형 B | 용도 |
| ------ | ------ | ------ | ---- |

{{cross_relations_table}}

## Agent Navigation Examples

### Epic에서 모든 하위 Story 찾기

```notion-api
POST /databases/{database_id}/query
{
  "filter": {
    "property": "Epic",
    "relation": { "contains": "{epic_id}" }
  }
}
```

### Task의 상위 Story 찾기

```notion-api
1. GET /pages/{task_id}
2. Extract "Story" relation property
3. GET /pages/{story_id}
```

### 특정 Epic 아래 모든 계층 탐색

```
1. Get Epic
2. Query Stories where Epic = {epic_id}
3. For each Story:
   - Query Tasks where Story = {story_id}
   - Query Bugs where Story = {story_id}
   - For each Task:
     - Query Subtasks where Task = {task_id}
```

## Orphan Detection

연결이 없는 백로그를 찾는 방법:

### 상위 없는 Story

```notion-api
POST /databases/{database_id}/query
{
  "filter": {
    "and": [
      { "property": "Type", "select": { "equals": "Story" } },
      { "property": "Epic", "relation": { "is_empty": true } }
    ]
  }
}
```

### 하위 없는 Epic

```notion-api
POST /databases/{database_id}/query
{
  "filter": {
    "and": [
      { "property": "Type", "select": { "equals": "Epic" } },
      { "property": "Stories", "relation": { "is_empty": true } }
    ]
  }
}
```

## Integrity Rules

백로그 계층 무결성을 유지하기 위한 규칙:

{{integrity_rules_list}}

## Tips for Agents

1. **항상 계층 확인**: 새 백로그 생성 시 상위 연결 확인
2. **상태 일관성**: 하위 완료 시 상위 상태 검토
3. **고아 방지**: 상위 삭제 시 하위 처리 확인
4. **순환 참조 금지**: A→B→A 형태 연결 금지

---

_이 가이드는 Navigator 에이전트가 자동 생성했습니다._
_수정이 필요하면 `*edit-guide` 명령을 사용하세요._
